# VÃ­ dá»¥: Táº¡o Rare Animal NFTs at the Thao Cam Vien Zoo ğŸ¥º 

Trong vÃ­ dá»¥ nÃ y mÃ¬nh sáº½ viáº¿t má»™t module `wild_NFT`. ÄÃ¢y lÃ  module Ä‘Æ°á»£c thiáº¿t káº¿ quáº£n lÃ½ cÃ¡c NFT Ä‘á»™ng váº­t quÃ½ hiáº¿m á»Ÿ sá»Ÿ thÃº 

Sau Ä‘Ã¢y lÃ  pháº§n giá»›i thiá»‡u vá» cÃ¡c cáº¥u trÃºc chÃ­nh:

1. Animals struct:

```rust
public struct AnimalInfo has key , store {
        id: UID,
        name: String, 
        species: String,
        habitat: String, 
        status: u64,
        image_url: Url
  }

public struct Animals has key, store {
    id: UID,
    animal_infos: Table<u64, AnimalInfo>,
}


//NhÃ¢n viÃªn má»›i sáº½ cÃ³ quyá»n Ä‘á»ƒ cung cáº¥p thÃªm thÃ´ng tin Ä‘á»™ng váº­t
 public struct NFTAdminCap has key{
      id: UID
  }
 
```

# **HÃ m (Function)**:

1. **ThÃªm thÃ´ng tin Ä‘á»™ng váº­t (Quyá»n Admin)** Admin cÃ³ thá»ƒ thÃªm thÃ´ng tin Ä‘á»™ng váº­t má»›i vÃ o struct `Animals:`

```rust
public fun add_animal(
    _: &NFTAdminCap,
    animals: &mut Animals,
    name: String,
    species: String,
    habitat: String,
    status: u64,
    image_url: String,
    ctx: &mut TxContext,
) {
    let new_animal = AnimalInfo {
        id: object::new(ctx),
        name,
        species,
        habitat,
        status,
        image_url,
    };
    let key = table::length(&animals.animal_infos);
    table::add(&mut animals.animal_infos, key, new_animal);
}
```

VÃ­ dá»¥ sau khi mÃ¬nh add thÃ nh cÃ´ng: 

```rust
[warning] Client/Server api version mismatch, client api version : 1.39.2, server api version : 1.39.3
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ objectId      â”‚  0xb9235f4a2b07d6c6f071c7a42bdc58ec1ca1ab040dbcdb44d4844d8709bc2b99                                                                                                      â”‚
â”‚ version       â”‚  289571540                                                                                                                                                               â”‚
â”‚ digest        â”‚  3bicPMZ8jYBS6oGjPm2dcaiZQia9WLqzzrdJ6KmEi2Zv                                                                                                                            â”‚
â”‚ objType       â”‚  0xf5e12e4451771fb23acca10a10b23ecb797d52c11ad42e363616062e9120e6c6::animal::Animals                                                                                     â”‚
â”‚ owner         â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                                                                                  â”‚
â”‚               â”‚ â”‚ AddressOwner â”‚  0x915c2d19ee5fde257693f25e6c2cabb04c25e7ae03932817d52e122258c88ddb  â”‚                                                                                  â”‚
â”‚               â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                                                                                  â”‚
â”‚ prevTx        â”‚  63Rni1y3Ms6g6B89Aq1utKgZpNmbSLeEEBeV6rLWfw7x                                                                                                                            â”‚
â”‚ storageRebate â”‚  1596000                                                                                                                                                                 â”‚
â”‚ content       â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚               â”‚ â”‚ dataType          â”‚  moveObject                                                                                                                                      â”‚ â”‚
â”‚               â”‚ â”‚ type              â”‚  0xf5e12e4451771fb23acca10a10b23ecb797d52c11ad42e363616062e9120e6c6::animal::Animals                                                             â”‚ â”‚
â”‚               â”‚ â”‚ hasPublicTransfer â”‚  true                                                                                                                                            â”‚ â”‚
â”‚               â”‚ â”‚ fields            â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚ animal_infos â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚ type   â”‚  0x2::table::Table<u64, 0xf5e12e4451771fb23acca10a10b23ecb797d52c11ad42e363616062e9120e6c6::animal::AnimalInfo>  â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚ fields â”‚ â•­â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚        â”‚ â”‚ id   â”‚ â•­â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚        â”‚ â”‚      â”‚ â”‚ id â”‚  0x60c9569eb12e3c466c9894ad61ec7add6a0f6791334074a83e3db6c446aebc35  â”‚ â”‚                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚        â”‚ â”‚      â”‚ â•°â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚        â”‚ â”‚ size â”‚  0                                                                            â”‚                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚        â”‚ â•°â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                         â”‚ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚ id           â”‚ â•­â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                                                 â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â”‚ id â”‚  0xb9235f4a2b07d6c6f071c7a42bdc58ec1ca1ab040dbcdb44d4844d8709bc2b99  â”‚                                                 â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â”‚              â”‚ â•°â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                                                 â”‚ â”‚ â”‚
â”‚               â”‚ â”‚                   â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚ â”‚
â”‚               â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
```

NgoÃ i ra báº¡n cÃ³ thá»ƒ cÃ³ thÃªm quyá»n update thÃ´ng tin cá»§a Ä‘á»™ng váº­t Ä‘Ã³ ( chá»‰ cÃ³ admin má»›i lÃ m Ä‘Æ°á»£c) : 

```rust
public fun update_animal(
    _: &NFTAdminCap,
    animals: &mut Animals,
    key: u64,
    new_name: String,
    new_status: u64,
    ctx: &mut TxContext,
) {
		// kiá»ƒm tra id cá»§a Ä‘á»™ng váº­t Ä‘Ã³ lÃ  stt cá»§a Ä‘á»™ng váº­t Ä‘Ã³
    //assert!(table::contains(&animals.animal_infos, key), ERR_KEY_DOES_NOT_EXIST);
    
    let animal_info = table::borrow_mut(&mut animals.animal_infos, key);
    animal_info.name = new_name;
    animal_info.status = new_status;
}

```

Tiáº¿p theo mÃ¬nh sáº½ lÃ m sÃ¢u hÆ¡n vá» cÃ¡c pháº§n lÃ m viá»‡c vá»›i NFT nhÆ° lÃ  Buy NFT:

```rust
public fun mint_nft(
    animals: &Animals,
    key: u64,
    inputcoin: Coin<SUI>,
    recipient: address,
    ctx: &mut TxContext,
) {

    let animal_info = &animals.animal_infos[key];
    let new_nft = AnimalNFT {
        id: object::new(ctx),
        name: animal_info.name,
        animal_id: key,
        species: animal_info.species,
        habitat: animal_info.habitat,
        adopted_by: recipient,
        image_url: animal_info.image_url,
    };
    transfer::public_transfer(new_nft, recipient);
}
```

